<html>
<head>
<script>

function f1(message="salut") {
  var message = "bonjour"
  function f2() {
    console.log(`je suis f2, message=${message}`)
  }
  
  console.log("je suis f1 et je retourne la fonction f2")
  f2.getMessage = () => message
  f2.setMessage = (m) => message = m  
  return f2
}

const F = f1()
console.log(`F vaut ${F}`)
F()

console.log(`F.message = ${F.message}`)
F.message = "bonsoir"
F()

console.log(`F.getMessage() = ${F.getMessage()}`)
F.setMessage("bonne nuit")
F()

function g1({auteur, message, date}) {
  function g2() {
    console.log(`message=${message}, daté de ${date}, signé ${auteur}`)
  }
  return g2
}

const G = g1({date: "hier", message: "à demain", auteur: "Pierre"})
G()

function h1({auteur, message="bonjour", date="aujourd'hui"} = {}) {
  function h2() {
    console.log(`autre message=${message}, daté de ${date}, signé ${auteur}`)
  }
  h2.getMessage = () => message
  
  h2.setMessage = function (m) {
    message = m
    return h2
  }
  
  h2.setDate = function (d) {
    date = d
    return h2
  }
  
  h2.getDate = () => date
  return h2
}

const Ha = h1({auteur: "Pierre"})
Ha()
const Hb = h1({auteur: "Yannick", date: "demain"})
Hb()
const Hc = h1({auteur: "Pierre", date: "hier", message: "à demain"})
Hc()

const Hd = h1({auteur: "Yannick"}).setDate("hiziv").setMessage("demat")
Hd()

</script>
</head>
<body>
</body>
</html>